import{_ as T}from"./index.af4623d6.js";import{G as $,H as G,C as N,b as H,I as M,J as P,w as j,M as q,B as J,L,D as W}from"./element-plus.46c04e86.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang.6dd496dd.js";import{u as z}from"./vue-router.be7d85e4.js";import{g as K,d as O}from"./distribution.fb8edf39.js";import{e as Q,d as Y}from"./index.9967fbd7.js";import{d as Z,s as ee,r as D,j as te,o as le,c as oe,X as e,P as t,a as o,W as c,V as i,n as ae,b7 as ue,b6 as se}from"./@vue.6265a5d9.js";import"./@vueuse.66625460.js";import"./@element-plus.84bb5020.js";import"./lodash-es.bb7dceda.js";import"./dayjs.f16af943.js";import"./axios.0f2860ff.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.9848f74d.js";import"./pinia.d91ee8f0.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.3e9ac15b.js";import"./color.a065fa6b.js";import"./clone.f258b259.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.29279dd9.js";import"./ms.a9ae1d6d.js";import"./nprogress.423ae918.js";import"./vue-clipboard3.ae536e99.js";import"./clipboard.6f2755f0.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.3fa8b4f2.js";const B=m=>(ue("data-v-8b338edd"),m=m(),se(),m),ie=B(()=>o("div",{class:"font-medium text-xl"},"\u5546\u54C1\u4FE1\u606F",-1)),de={class:"mt-4"},ne=i("\u53C2\u4E0E\u5206\u9500"),_e=i("\u4E0D\u53C2\u4E0E\u5206\u9500"),re=B(()=>o("div",{class:"form-tips"}," \u662F\u5426\u53C2\u4E0E\u5206\u9500\uFF0C\u9009\u62E9\u4E0D\u53C2\u4E0E\u5206\u9500\u5C06\u4E0D\u4EA7\u751F\u5206\u9500\u4F63\u91D1 ",-1)),ce={class:"flex-none"},me=i("\u9ED8\u8BA4\u5206\u9500\u7B49\u7EA7\u4F63\u91D1\u89C4\u5219"),pe=i("\u5355\u72EC\u8BBE\u7F6E\u4F63\u91D1\u6BD4\u4F8B"),be={class:"mt-2 flex"},fe=i("\u8BBE\u7F6E\u81EA\u8D2D\u4F63\u91D1"),ve=i("\u8BBE\u7F6E\u4E00\u7EA7\u4F63\u91D1"),Ee=i("\u8BBE\u7F6E\u4E8C\u7EA7\u4F63\u91D1"),Fe={class:"flex items-center"},he={class:"ml-2"},De={class:"flex items-center"},Be={class:"ml-2"},Ce={class:"flex items-center"},xe={class:"flex items-center"},Ve={class:"ml-2"},ge=i("\u4FDD\u5B58"),ye=Z({__name:"detail",setup(m){const C=z().query.id,p=ee(),d=D(),a=D({code:"",name:"",id:0,cover:"",distribution_status:1,rule:[],distribution_rule:1}),x=async()=>{a.value=await K({id:C})},V=async s=>{await ae(),d.value=s.length},g=s=>{p.value.getSelectionRows().map(u=>{u.self_ratio=s})},y=s=>{p.value.getSelectionRows().map(u=>{u.first_ratio=s})},w=s=>{p.value.getSelectionRows().map(u=>{u.second_ratio=s})},S=async()=>{await O({...a.value}),Q.back()};return te(async()=>{await x()}),(s,u)=>{const A=$,v=G,_=N,R=H,b=M,h=P,f=j,E=X,n=q,F=J,k=L,I=W,U=T;return le(),oe("div",null,[e(v,{class:"!border-none",shadow:"never"},{default:t(()=>[e(A,{content:s.$route.meta.title,onBack:u[0]||(u[0]=l=>s.$router.back())},null,8,["content"])]),_:1}),e(I,{"label-width":"120px"},{default:t(()=>[e(v,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[ie,o("div",de,[e(_,{label:"\u5546\u54C1\u7F16\u53F7"},{default:t(()=>[o("div",null,c(a.value.id),1)]),_:1}),e(_,{label:"\u5546\u54C1\u56FE\u7247"},{default:t(()=>[e(R,{src:a.value.cover,class:"w-[58px] h-[58px]"},null,8,["src"])]),_:1}),e(_,{label:"\u5546\u54C1\u540D\u79F0"},{default:t(()=>[o("div",null,c(a.value.name),1)]),_:1})])]),_:1}),e(v,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[o("div",null,[e(_,{label:"\u5206\u9500\u72B6\u6001"},{default:t(()=>[o("div",null,[e(h,{modelValue:a.value.distribution_status,"onUpdate:modelValue":u[1]||(u[1]=l=>a.value.distribution_status=l)},{default:t(()=>[e(b,{label:1},{default:t(()=>[ne]),_:1}),e(b,{label:0},{default:t(()=>[_e]),_:1})]),_:1},8,["modelValue"]),re])]),_:1}),e(_,{label:"\u5206\u9500\u72B6\u6001"},{default:t(()=>[o("div",ce,[e(h,{modelValue:a.value.distribution_rule,"onUpdate:modelValue":u[2]||(u[2]=l=>a.value.distribution_rule=l)},{default:t(()=>[e(b,{label:1},{default:t(()=>[me]),_:1}),e(b,{label:2},{default:t(()=>[pe]),_:1})]),_:1},8,["modelValue"]),o("div",be,[e(E,{onConfirm:g,disabled:!d.value},{default:t(()=>[e(f,{disabled:!d.value},{default:t(()=>[fe]),_:1},8,["disabled"])]),_:1},8,["disabled"]),e(E,{onConfirm:y,disabled:!d.value},{default:t(()=>[e(f,{class:"ml-2",disabled:!d.value},{default:t(()=>[ve]),_:1},8,["disabled"])]),_:1},8,["disabled"]),e(E,{onConfirm:w,disabled:!d.value},{default:t(()=>[e(f,{class:"ml-2",disabled:!d.value},{default:t(()=>[Ee]),_:1},8,["disabled"])]),_:1},8,["disabled"])]),e(k,{data:a.value.rule,ref_key:"tableRef",ref:p,class:"mt-2",onSelectionChange:V},{default:t(()=>[e(n,{selectable:()=>a.value.distribution_rule==2,type:"selection",width:"55"},null,8,["selectable"]),e(n,{label:"\u5206\u9500\u7B49\u7EA7",prop:"level_name"}),e(n,{label:"\u4EF7\u683C",prop:"sell_price"}),e(n,{label:"\u81EA\u8D2D\u4F63\u91D1\u6BD4\u4F8B(%)","min-width":"180"},{default:t(({row:l})=>[o("div",null,[o("div",Fe,[e(F,{class:"w-[80px]",type:"number",modelValue:l.self_ratio,"onUpdate:modelValue":r=>l.self_ratio=r,disabled:a.value.distribution_rule==1},null,8,["modelValue","onUpdate:modelValue","disabled"]),o("div",he," = "+c((l.sell_price*l.self_ratio/100).toFixed(2))+"\u5143 ",1)])])]),_:1},8,["label"]),e(n,{label:"\u4E00\u7EA7\u4F63\u91D1\u6BD4\u4F8B(%)","min-width":"180"},{default:t(({row:l})=>[o("div",null,[o("div",De,[e(F,{class:"w-[80px]",type:"number",modelValue:l.first_ratio,"onUpdate:modelValue":r=>l.first_ratio=r,disabled:a.value.distribution_rule==1},null,8,["modelValue","onUpdate:modelValue","disabled"]),o("div",Be," = "+c((l.sell_price*l.first_ratio/100).toFixed(2))+"\u5143 ",1)])])]),_:1},8,["label"]),e(n,{label:"\u4E8C\u7EA7\u4F63\u91D1\u6BD4\u4F8B(%)","min-width":"180"},{default:t(({row:l})=>[o("div",Ce,[o("div",xe,[e(F,{class:"w-[80px]",type:"number",modelValue:l.second_ratio,"onUpdate:modelValue":r=>l.second_ratio=r,disabled:a.value.distribution_rule==1},null,8,["modelValue","onUpdate:modelValue","disabled"]),o("div",Ve," = "+c((l.sell_price*l.second_ratio/100).toFixed(2))+"\u5143 ",1)])])]),_:1},8,["label"])]),_:1},8,["data"])])]),_:1})])]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(f,{type:"primary",onClick:S},{default:t(()=>[ge]),_:1})]),_:1})])}}});const ct=Y(ye,[["__scopeId","data-v-8b338edd"]]);export{ct as default};

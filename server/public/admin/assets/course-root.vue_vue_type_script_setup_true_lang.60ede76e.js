import{L as I,w as R,B as $,M as S,b as P,N as U,O as N,x as L,y as j}from"./element-plus.46c04e86.js";import{P as M}from"./index.ef2d2188.js";import{a as O}from"./course.75a395f6.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang.9b41a941.js";import{u as z}from"./usePaging.92ba177b.js";import{d as x,r as w,j as Q,n as W,o as c,c as X,a as y,O as f,P as t,U as E,X as e,u as h,Q as Y,W as q,k as G,Y as H,V as D,s as J,K as Z}from"./@vue.6265a5d9.js";import{d as ee}from"./index.9967fbd7.js";const te={class:"flex justify-between mb-4"},ae=D("\u65B0\u5EFA\u56FE\u6587\u8BFE\u7A0B "),oe=D("\u65B0\u5EFA\u97F3\u9891\u8BFE\u7A0B "),ue=D("\u65B0\u5EFA\u89C6\u9891\u8BFE\u7A0B "),le={class:"mt-[20px]"},se={class:"flex col-center"},ne={class:"ml-[10px]"},re=D("\u4E0A\u67B6\u4E2D"),ie=D("\u5DF2\u4E0B\u67B6"),de={class:"flex justify-end",style:{height:"66px"}},ce=x({__name:"course",props:{modelValue:{default:[]},type:{default:0},course:{default:0}},emits:["update:modelValue"],setup(i,{expose:F,emit:m}){const a=i,v=w(),B=w({type:a.type,name:""}),{pager:l,getLists:p}=z({size:5,fetchFun:O,params:B.value}),n=r=>r.id,g=r=>{m("update:modelValue",r)},V=async()=>{await p(),s()},s=async()=>{l.lists.forEach((r,o)=>{for(let d=0;d<a.course.length;d++)if(r.id==a.course[d].id){v.value.toggleRowSelection(l.lists[o],!0);break}else v.value.toggleRowSelection(l.lists[o],!1)})};return Q(async()=>{await p(),await W(),s()}),F({getIsSelect:s}),(r,o)=>{const d=R,C=$,_=S,A=P,k=U,T=N;return c(),X(H,null,[y("div",te,[i.type==1?(c(),f(d,{key:0,type:"primary",onClick:o[0]||(o[0]=u=>r.$router.push("/course/course/imageText/detail?type=1"))},{default:t(()=>[ae]),_:1})):E("",!0),i.type==2?(c(),f(d,{key:1,type:"primary",onClick:o[1]||(o[1]=u=>r.$router.push("/course/course/audio/detail?type=2"))},{default:t(()=>[oe]),_:1})):E("",!0),i.type==3?(c(),f(d,{key:2,type:"primary",onClick:o[2]||(o[2]=u=>r.$router.push("/course/course/video/detail?type=3"))},{default:t(()=>[ue]),_:1})):E("",!0),e(C,{class:"ls-input",modelValue:B.value.name,"onUpdate:modelValue":o[3]||(o[3]=u=>B.value.name=u),onInput:h(p),placeholder:"\u8BF7\u8F93\u5165\u8BFE\u7A0B\u540D\u79F0"},{append:t(()=>[e(d,{icon:"search"})]),_:1},8,["modelValue","onInput"])]),y("div",le,[Y((c(),f(h(I),{ref_key:"tableDataRef",ref:v,height:"380",data:h(l).lists,style:{width:"100%"},onSelectionChange:g,"row-key":n},{default:t(()=>[e(_,{"reserve-selection":"",type:"selection",width:"55"}),e(_,{label:"\u8BFE\u7A0B\u540D\u79F0","min-width":"200"},{default:t(u=>[y("div",se,[y("div",null,[e(A,{style:{width:"80px",height:"60px"},src:u.row.cover,fit:"cover"},null,8,["src"])]),y("div",ne,q(u.row.name),1)])]),_:1}),e(_,{property:"type_desc",label:"\u8BFE\u7A0B\u7C7B\u578B","max-width":"160"}),e(_,{property:"teacher_name",label:"\u8BB2\u5E08","max-width":"120"}),e(_,{property:"sell_price",label:"\u4EF7\u683C","max-width":"120"}),e(_,{property:"status",label:"\u8BFE\u7A0B\u72B6\u6001","max-width":"140"},{default:t(u=>[u.row.status===1?(c(),f(k,{key:0,class:"ml-2",type:"success"},{default:t(()=>[re]),_:1})):E("",!0),u.row.status===0?(c(),f(k,{key:1,class:"ml-2",type:"info"},{default:t(()=>[ie]),_:1})):E("",!0)]),_:1})]),_:1},8,["data"])),[[T,h(l).loading]])]),y("div",de,[e(K,{modelValue:h(l),"onUpdate:modelValue":o[4]||(o[4]=u=>G(l)?l.value=u:null),onChange:V,layout:"total, prev, pager, next, jumper"},null,8,["modelValue"])])],64)}}});const b=ee(ce,[["__scopeId","data-v-b27ad504"]]),ge=x({__name:"course-root",props:{courseData:{default:[]}},emits:["confirm"],setup(i,{emit:F}){const m=J();w([]);const a=w({ITData:[],audioData:[],videoData:[]}),v=()=>{const p=a.value.ITData.concat(a.value.audioData).concat(a.value.videoData);F("confirm",p)},B=async()=>{setTimeout(()=>{console.log(m.value),m.value.getIsSelect()},100)},l=w("0");return(p,n)=>{const g=L,V=j;return c(),f(M,{class:"mr-[10px] inline",clickModalClose:!1,title:"\u9009\u62E9\u8BFE\u7A0B",center:!0,onConfirm:v,width:"60vw",onOpen:B},{trigger:t(()=>[Z(p.$slots,"default")]),default:t(()=>[e(V,{modelValue:l.value,"onUpdate:modelValue":n[3]||(n[3]=s=>l.value=s)},{default:t(()=>[e(g,{label:"\u56FE\u6587\u8BFE\u7A0B",name:"0"},{default:t(()=>[e(b,{modelValue:a.value.ITData,"onUpdate:modelValue":n[0]||(n[0]=s=>a.value.ITData=s),ref_key:"courseRef",ref:m,course:i.courseData,type:1},null,8,["modelValue","course"])]),_:1}),e(g,{label:"\u97F3\u9891\u8BFE\u7A0B",name:"1"},{default:t(()=>[e(b,{modelValue:a.value.audioData,"onUpdate:modelValue":n[1]||(n[1]=s=>a.value.audioData=s),ref_key:"courseRef",ref:m,course:i.courseData,type:2},null,8,["modelValue","course"])]),_:1}),e(g,{label:"\u89C6\u9891\u8BFE\u7A0B",name:"2"},{default:t(()=>[e(b,{modelValue:a.value.videoData,"onUpdate:modelValue":n[2]||(n[2]=s=>a.value.videoData=s),ref_key:"courseRef",ref:m,course:i.courseData,type:3},null,8,["modelValue","course"])]),_:1})]),_:1},8,["modelValue"])]),_:3})}}});export{ge as _};

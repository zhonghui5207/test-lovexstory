import{_ as L}from"./index.af4623d6.js";import{G as X,H as Y,B as z,C as K,I as Q,J as Z,w as ee,a6 as ue,D as te,F as oe}from"./element-plus.46c04e86.js";import{_ as le}from"./index.vue_vue_type_style_index_0_lang.b226f45e.js";import{_ as ae}from"./picker.986ba611.js";import{u as re,a as ne}from"./vue-router.be7d85e4.js";import{f as se,v as g}from"./index.9967fbd7.js";import{t as ie,b as pe,c as de}from"./manage.2a73fa98.js";import{d as me,r as F,a1 as _e,j as ce,o as p,c as B,X as u,P as t,u as m,a as d,Y as h,a8 as C,O as E,U,V as i,W as R}from"./@vue.6265a5d9.js";import"./@vueuse.66625460.js";import"./@element-plus.84bb5020.js";import"./lodash-es.bb7dceda.js";import"./dayjs.f16af943.js";import"./axios.0f2860ff.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@wangeditor.96d8b81f.js";import"./index.ef2d2188.js";import"./index.90219876.js";import"./index.vue_vue_type_script_setup_true_lang.9b41a941.js";import"./index.850e3705.js";import"./index.vue_vue_type_script_setup_true_lang.6dd496dd.js";import"./usePaging.92ba177b.js";import"./vue3-video-play.c42f2300.js";import"./vuedraggable.3b18617e.js";import"./vue.9761cdd1.js";import"./sortablejs.a6b5adab.js";import"./lodash.9848f74d.js";import"./pinia.d91ee8f0.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.3e9ac15b.js";import"./color.a065fa6b.js";import"./clone.f258b259.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.29279dd9.js";import"./ms.a9ae1d6d.js";import"./nprogress.423ae918.js";import"./vue-clipboard3.ae536e99.js";import"./clipboard.6f2755f0.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.3fa8b4f2.js";const fe=i("\u5355\u9009\u9898"),ve=i("\u591A\u9009\u9898"),Ee=d("div",{class:"form-tips"},"\u5C3A\u5BF8\uFF1A630*440",-1),be=i("\u5220\u9664"),ye=i("\u65B0\u589E\u9009\u9879"),we=d("span",{class:"form-tips ml-2"},"\u6700\u591A\u6DFB\u52A010\u4E2A\u9009\u9879",-1),Fe={class:"h-[500px] w-[1000px]"},Be=i("\u7B80\u5355"),Ve=i("\u4E2D\u7B49"),ke=i("\u56F0\u96BE"),ge=i("\u4FDD\u5B58"),gu=me({__name:"editTopic",setup(he){const A=F(),b=re(),$=ne(),D=b.query.questionbank_id,x=b.query.status||"1",c=b.query.id,S=b.query.title,f=F(""),v=F([]),e=F({type:1,stem:"",illustration:"",option:["","",""],answer:[],analysis:"",difficulty:1,points:""}),N=_e({stem:[{required:!0,trigger:["blur","change"],message:"\u8BF7\u8F93\u5165\u9898\u5E72"}],answer:[{required:!0,validator:(a,o,n)=>{e.value.type==1&&f.value===""?n(new Error("\u8BF7\u9009\u62E9\u6B63\u786E\u7B54\u6848")):e.value.type==2&&v.value.length==0&&n(new Error("\u8BF7\u9009\u62E9\u6B63\u786E\u7B54\u6848")),n()},trigger:["blur"]}],analysis:[{required:!0,validator:(a,o,n)=>{o=="<p><br></p>"||o=="<p>&nbsp;</p>"?n(new Error("\u8BF7\u8F93\u5165\u9898\u76EE\u89E3\u6790\uFF01")):n()},trigger:["blur","change"]}],option:[{validator:(a,o,n)=>{o.forEach(y=>{y==""&&n(new Error("\u9009\u9879\u4E0D\u80FD\u4E3A\u7A7A\uFF01"))}),n()},trigger:["blur","change"]}]}),G=()=>{if(e.value.option.length==10){se.msgWarning("\u6700\u591A\u6DFB\u52A010\u4E2A\u9009\u9879\uFF01");return}e.value.option.push("")},I=a=>{e.value.option.splice(a,1)},P=async()=>{const a=await ie({id:c});Object.keys(e.value).map(o=>{e.value[o]=a[o],a.type==1?f.value=a.answer[0]:v.value=a.answer})},T=async()=>{var a;await((a=A.value)==null?void 0:a.validate()),e.value.answer=[],e.value.type==1?e.value.answer.push(f.value):e.value.answer=v.value,c?await pe({...e.value,questionbank_id:D,id:c}):await de({...e.value,questionbank_id:D}),$.back()};return ce(async()=>{c&&await P()}),(a,o)=>{const n=X,y=Y,w=z,s=K,_=Q,V=Z,j=ae,k=ee,H=oe,M=ue,O=le,W=te,J=L;return p(),B("div",null,[u(y,{shadow:"never",class:"!border-none"},{default:t(()=>[u(n,{content:`${m(c)?"\u7F16\u8F91\u9898\u76EE":"\u65B0\u589E\u9898\u76EE"}`,onBack:o[0]||(o[0]=l=>a.$router.back())},null,8,["content"])]),_:1}),u(y,{shadow:"never",class:"!border-none mt-4"},{default:t(()=>[u(W,{disabled:m(x)!=1,"label-width":"90px",model:e.value,ref_key:"formRef",ref:A,rules:N},{default:t(()=>[u(s,{label:"\u9898\u5E93"},{default:t(()=>[d("div",null,[u(w,{value:m(S),disabled:"",class:"w-[500px]"},null,8,["value"])])]),_:1}),u(s,{label:"\u9898\u578B"},{default:t(()=>[u(V,{modelValue:e.value.type,"onUpdate:modelValue":o[1]||(o[1]=l=>e.value.type=l)},{default:t(()=>[u(_,{label:1},{default:t(()=>[fe]),_:1}),u(_,{label:2},{default:t(()=>[ve]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u9898\u5E72",prop:"stem"},{default:t(()=>[d("div",null,[u(w,{placeholder:"\u8BF7\u8F93\u5165\u9898\u5E72","show-word-limit":"",maxlength:"1000",modelValue:e.value.stem,"onUpdate:modelValue":o[2]||(o[2]=l=>e.value.stem=l),type:"textarea",rows:"5",class:"w-[500px]"},null,8,["modelValue"])])]),_:1}),u(s,{label:"\u9898\u5E72\u63D2\u56FE"},{default:t(()=>[d("div",null,[u(j,{modelValue:e.value.illustration,"onUpdate:modelValue":o[3]||(o[3]=l=>e.value.illustration=l)},null,8,["modelValue"]),Ee])]),_:1}),d("div",null,[(p(!0),B(h,null,C(e.value.option,(l,r)=>(p(),E(s,{key:r,label:`\u9009\u9879${m(g)(r)}`,class:"is-required"},{default:t(()=>[d("div",null,[u(w,{placeholder:"\u8BF7\u8F93\u5165\u7B54\u6848","show-word-limit":"",maxlength:"100",class:"w-[500px]",modelValue:e.value.option[r],"onUpdate:modelValue":q=>e.value.option[r]=q},null,8,["modelValue","onUpdate:modelValue"]),u(k,{onClick:q=>I(r),link:"",type:"danger",class:"ml-2"},{default:t(()=>[be]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128))]),u(s,{prop:"option"},{default:t(()=>[u(k,{type:"primary",onClick:G},{default:t(()=>[ye]),_:1}),we]),_:1}),u(s,{label:"\u6B63\u786E\u7B54\u6848",prop:"answer"},{default:t(()=>[e.value.type==1?(p(),E(V,{key:0,modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=l=>f.value=l)},{default:t(()=>[(p(!0),B(h,null,C(e.value.option,(l,r)=>(p(),E(_,{key:r,label:r},{default:t(()=>[i(R(m(g)(r)),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])):U("",!0),e.value.type==2?(p(),E(M,{key:1,modelValue:v.value,"onUpdate:modelValue":o[5]||(o[5]=l=>v.value=l)},{default:t(()=>[(p(!0),B(h,null,C(e.value.option,(l,r)=>(p(),E(H,{key:r,label:r},{default:t(()=>[i(R(m(g)(r)),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])):U("",!0)]),_:1}),u(s,{label:"\u9898\u76EE\u89E3\u6790",prop:"analysis"},{default:t(()=>[d("div",Fe,[u(O,{modelValue:e.value.analysis,"onUpdate:modelValue":o[6]||(o[6]=l=>e.value.analysis=l)},null,8,["modelValue"])])]),_:1}),u(s,{label:"\u9898\u76EE\u96BE\u5EA6"},{default:t(()=>[u(V,{modelValue:e.value.difficulty,"onUpdate:modelValue":o[7]||(o[7]=l=>e.value.difficulty=l)},{default:t(()=>[u(_,{label:1},{default:t(()=>[Be]),_:1}),u(_,{label:2},{default:t(()=>[Ve]),_:1}),u(_,{label:3},{default:t(()=>[ke]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u9898\u76EE\u8003\u70B9"},{default:t(()=>[u(w,{placeholder:"\u4E00\u884C\u8F93\u5165\u4E00\u4E2A\u8003\u70B9\uFF0C\u56DE\u8F66\u6362\u884C",modelValue:e.value.points,"onUpdate:modelValue":o[8]||(o[8]=l=>e.value.points=l),type:"textarea",rows:"5",class:"w-[500px]"},null,8,["modelValue"])]),_:1})]),_:1},8,["disabled","model","rules"])]),_:1}),u(J,null,{default:t(()=>[u(k,{disabled:m(x)!=1,onClick:T,type:"primary"},{default:t(()=>[ge]),_:1},8,["disabled"])]),_:1})])}}});export{gu as default};

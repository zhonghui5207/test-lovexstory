import{C as B,I as R,J as g,B as h,D as N}from"./element-plus.46c04e86.js";import{P as I}from"./index.ef2d2188.js";import{a as A}from"./user.449fbe96.js";import{f as _}from"./index.9967fbd7.js";import{d as j,s as F,r as q,a1 as P,e as U,w as S,o as W,O as G,P as t,a as J,X as o,V as l,W as D,u as M}from"./@vue.6265a5d9.js";const O={class:"pr-8"},T=l("\u589E\u52A0\u4F59\u989D"),X=l("\u6263\u51CF\u4F59\u989D"),Z=j({__name:"earning-adjust",props:{value:{type:[Number,String],required:!0},userId:{type:Number,default:0}},emits:["confirm"],setup(d,{expose:y,emit:C}){const p=d,n=F(),b=q(""),u=P({action:1,money:"",remark:"",wallet_type:2}),s=F(),i=U(()=>Number(p.value)+Number(u.money)*(u.action==1?1:-1)),E={money:[{required:!0,message:"\u8BF7\u8F93\u5165\u8C03\u6574\u7684\u91D1\u989D"}]},v=e=>{if(e.includes("-"))return _.msgError("\u8BF7\u8F93\u5165\u6B63\u6574\u6570");u.money=e},V=async()=>{var e,a;await((e=n.value)==null?void 0:e.validate()),await A({...u,id:p.userId}),C("confirm",u),(a=s.value)==null||a.close()},w=()=>{var e;(e=n.value)==null||e.resetFields()};return S(i,e=>{e<0&&(_.msgError("\u8C03\u6574\u540E\u4F59\u989D\u9700\u5927\u4E8E0"),u.amount="")}),y({open:e=>{var a;b.value=e.id,(a=s.value)==null||a.open()}}),(e,a)=>{const r=B,c=R,x=g,f=h,k=N;return W(),G(I,{ref_key:"popupRef",ref:s,title:"\u53EF\u63D0\u73B0\u4F59\u989D\u8C03\u6574",width:"500px",onConfirm:V,async:!0,onClose:w},{default:t(()=>[J("div",O,[o(k,{ref_key:"formRef",ref:n,model:u,"label-width":"120px",rules:E},{default:t(()=>[o(r,{label:"\u5F53\u524D\u4F59\u989D"},{default:t(()=>[l("\xA5 "+D(d.value),1)]),_:1}),o(r,{label:"\u4F59\u989D\u589E\u51CF",required:"",prop:"action"},{default:t(()=>[o(x,{modelValue:u.action,"onUpdate:modelValue":a[0]||(a[0]=m=>u.action=m)},{default:t(()=>[o(c,{label:1},{default:t(()=>[T]),_:1}),o(c,{label:0},{default:t(()=>[X]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u8C03\u6574\u4F59\u989D",prop:"amount"},{default:t(()=>[o(f,{"model-value":u.money,placeholder:"\u8BF7\u8F93\u5165\u8C03\u6574\u7684\u91D1\u989D",type:"number",onInput:v},null,8,["model-value"])]),_:1}),o(r,{label:"\u8C03\u6574\u540E\u4F59\u989D"},{default:t(()=>[l(" \xA5 "+D(M(i).toFixed(2)),1)]),_:1}),o(r,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[o(f,{modelValue:u.remark,"onUpdate:modelValue":a[1]||(a[1]=m=>u.remark=m),type:"textarea",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},512)}}});export{Z as _};

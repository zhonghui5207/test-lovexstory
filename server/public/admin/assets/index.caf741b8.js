import{B as X,C as Y,S as G,T as J,w as K,D as Z,H as ee,b as te,M as ue,L as ae,O as le}from"./element-plus.46c04e86.js";import{_ as ie}from"./index.vue_vue_type_script_setup_true_lang.9b41a941.js";import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang.560e5a8f.js";import{u as se}from"./usePaging.92ba177b.js";import{d as ne,g as re,h as me}from"./distributor.a87a429c.js";import{_ as de}from"./addDistributorPop.vue_vue_type_script_setup_true_lang.a7f9363f.js";import{f as L,e as _e}from"./index.9967fbd7.js";import{_ as pe}from"./adjustLevelPop.vue_vue_type_script_setup_true_lang.1066fbf8.js";import{d as ce,s as T,r as D,j as fe,aq as ve,o as i,c as y,X as t,P as u,Y as $,a8 as be,u as m,Q as p,O as s,a as E,V as o,W as k,U as B,k as Ce,n as P}from"./@vue.6265a5d9.js";import"./@vueuse.66625460.js";import"./@element-plus.84bb5020.js";import"./lodash-es.bb7dceda.js";import"./dayjs.f16af943.js";import"./axios.0f2860ff.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.ef2d2188.js";import"./lodash.9848f74d.js";import"./vue-router.be7d85e4.js";import"./pinia.d91ee8f0.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.3e9ac15b.js";import"./color.a065fa6b.js";import"./clone.f258b259.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.29279dd9.js";import"./ms.a9ae1d6d.js";import"./nprogress.423ae918.js";import"./vue-clipboard3.ae536e99.js";import"./clipboard.6f2755f0.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.3fa8b4f2.js";const Fe=o("\u67E5\u8BE2"),Ee=o("\u91CD\u7F6E"),ke=o("\u5F00\u901A\u5206\u9500\u5546"),Be={class:"flex items-center"},De={class:"ml-2"},ye={key:0,class:"ml-2 text-xs text-danger"},ge=o("\u8BE6\u60C5"),he=o("\u7B49\u7EA7\u8C03\u6574"),xe=o("\u51BB\u7ED3\u8D44\u683C"),Ve=o("\u6062\u590D\u8D44\u683C"),Ae={class:"flex justify-end mt-4"},Ct=ce({__name:"index",setup(we){const g=T(),h=T(),_=D(!1),l=D({user_info:"",level_id:"",is_freeze:"",start_time:"",end_time:""}),x=D([]),{pager:c,getLists:f,resetPage:z,resetParams:U}=se({fetchFun:ne,params:l.value}),j=async()=>{x.value=await re()},R=async()=>{_.value=!0,await P(),g.value.open()},V=async(n,a)=>{a==0&&await L.customConfirm("\u786E\u5B9A\u51BB\u7ED3\uFF1A","\uFF1F\u8BF7\u8C28\u614E\u5904\u7406",n.nickname,"color: red ","\u51BB\u7ED3\u4F1A\u5458"),a==1&&await L.customConfirm("\u786E\u5B9A\u6062\u590D\uFF1A","\uFF1F\u8BF7\u8C28\u614E\u5904\u7406",n.nickname," color: red ","\u6062\u590D\u4F1A\u5458"),await me({id:n.id}),f()},S=async n=>{_.value=!0,await P(),await h.value.open(n)},N=n=>{_e.push(`/app/distribute/distributor/detail?id=${n}`)};return fe(async()=>{await f(),await j()}),(n,a)=>{const O=X,v=Y,b=G,A=J,I=oe,d=K,q=Z,w=ee,M=te,r=ue,H=ae,Q=ie,C=ve("perms"),W=le;return i(),y($,null,[t(w,{class:"!border-none",shadow:"never"},{default:u(()=>[t(q,{ref:"formRef",class:"mb-[-16px] mt-4",model:l.value,inline:!0},{default:u(()=>[t(v,{label:"\u7528\u6237\u4FE1\u606F"},{default:u(()=>[t(O,{class:"w-[280px]",modelValue:l.value.user_info,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.user_info=e),placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0/\u7F16\u53F7",clearable:""},null,8,["modelValue"])]),_:1}),t(v,{label:"\u5206\u9500\u7B49\u7EA7"},{default:u(()=>[t(A,{class:"w-[280px]",modelValue:l.value.level_id,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.level_id=e)},{default:u(()=>[t(b,{label:"\u5168\u90E8",value:""}),(i(!0),y($,null,be(x.value,(e,F)=>(i(),s(b,{key:F,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"\u5206\u9500\u72B6\u6001"},{default:u(()=>[t(A,{class:"w-[280px]",modelValue:l.value.is_freeze,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.is_freeze=e)},{default:u(()=>[t(b,{label:"\u5168\u90E8",value:""}),t(b,{label:"\u6B63\u5E38",value:"0"}),t(b,{label:"\u51BB\u7ED3",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"\u6210\u4E3A\u5206\u9500\u5546\u65F6\u95F4"},{default:u(()=>[t(I,{startTime:l.value.start_time,"onUpdate:startTime":a[3]||(a[3]=e=>l.value.start_time=e),endTime:l.value.end_time,"onUpdate:endTime":a[4]||(a[4]=e=>l.value.end_time=e)},null,8,["startTime","endTime"])]),_:1}),t(v,null,{default:u(()=>[t(d,{type:"primary",onClick:m(z)},{default:u(()=>[Fe]),_:1},8,["onClick"]),t(d,{onClick:m(U)},{default:u(()=>[Ee]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(w,{class:"!border-none mt-4",shadow:"never"},{default:u(()=>[p((i(),s(d,{type:"primary",onClick:R},{default:u(()=>[ke]),_:1})),[[C,["distribute.distributor/add"]]]),E("div",null,[p((i(),s(H,{ref:"tableRef",size:"large",data:m(c).lists,class:"mt-4"},{default:u(()=>[t(r,{label:"\u7528\u6237\u4FE1\u606F","min-width":"220"},{default:u(({row:e})=>[E("div",Be,[t(M,{class:"w-[47px] h-[47px] flex-none",src:e.avatar},null,8,["src"]),E("div",De,[o(k(e.nickname)+" ",1),e.isClose?(i(),y("span",ye,"(\u5DF2\u6CE8\u9500)")):B("",!0)])])]),_:1}),t(r,{label:"\u5206\u9500\u7B49\u7EA7","min-width":"90"},{default:u(({row:e})=>[o(k((e==null?void 0:e.level_name)||"-"),1)]),_:1}),t(r,{label:"\u5DF2\u5165\u8D26\u4F63\u91D1","min-width":"90",prop:"earnings"}),t(r,{label:"\u5F85\u7ED3\u7B97\u4F63\u91D1","min-width":"90"},{default:u(({row:e})=>[o(k(e.wait_earnings||0),1)]),_:1}),t(r,{label:"\u4E0A\u7EA7\u63A8\u8350\u4EBA","min-width":"90"},{default:u(({row:e})=>[o(k(e.first_leader_name||"\u7CFB\u7EDF"),1)]),_:1}),t(r,{label:"\u5206\u9500\u72B6\u6001","min-width":"90"},{default:u(({row:e})=>[o(k(e.is_freeze_desc),1)]),_:1}),t(r,{label:"\u6210\u4E3A\u5206\u9500\u5546\u65F6\u95F4","min-width":"90",prop:"distribution_time"}),t(r,{label:"\u64CD\u4F5C","min-width":"180"},{default:u(({row:e})=>[E("div",null,[p((i(),s(d,{type:"primary",onClick:F=>N(e.id),link:""},{default:u(()=>[ge]),_:2},1032,["onClick"])),[[C,["distribute.distributor/detail"]]]),p((i(),s(d,{disabled:e.isClose,type:"primary",link:"",onClick:F=>S(e)},{default:u(()=>[he]),_:2},1032,["disabled","onClick"])),[[C,["distribute.distributor/leveladjust"]]]),e.is_freeze==0?p((i(),s(d,{key:0,type:"primary",link:"",disabled:e.isClose,onClick:F=>V(e,0)},{default:u(()=>[xe]),_:2},1032,["disabled","onClick"])),[[C,["distribute.distributor/status"]]]):B("",!0),e.is_freeze==1?p((i(),s(d,{key:1,type:"primary",link:"",disabled:e.isClose,onClick:F=>V(e,1)},{default:u(()=>[Ve]),_:2},1032,["disabled","onClick"])),[[C,["distribute.distributor/status"]]]):B("",!0)])]),_:1})]),_:1},8,["data"])),[[W,m(c).loading]])]),E("div",Ae,[t(Q,{modelValue:m(c),"onUpdate:modelValue":a[5]||(a[5]=e=>Ce(c)?c.value=e:null),onChange:m(f)},null,8,["modelValue","onChange"])])]),_:1}),_.value?(i(),s(de,{key:0,ref_key:"popRef",ref:g,onClose:a[6]||(a[6]=e=>_.value=!1),onConfirm:m(f)},null,8,["onConfirm"])):B("",!0),_.value?(i(),s(pe,{key:1,ref_key:"adjustLevelPop",ref:h,onClose:a[7]||(a[7]=e=>_.value=!1),onConfirm:m(f)},null,8,["onConfirm"])):B("",!0)],64)}}});export{Ct as default};

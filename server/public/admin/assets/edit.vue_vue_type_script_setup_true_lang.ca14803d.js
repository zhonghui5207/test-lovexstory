import{t as U,a4 as R,C as N,B as q,v as I,D as P}from"./element-plus.46c04e86.js";import{r as n}from"./index.9967fbd7.js";import{P as S}from"./index.ef2d2188.js";import{u as M}from"./useDictOptions.39755c1c.js";import{d as O,s as _,r as T,e as L,a1 as X,o as F,c as $,X as t,P as d,O as j,u as D,U as z,a as B}from"./@vue.6265a5d9.js";function le(a){return n.get({url:"/dept.dept/lists",params:a})}function G(a){return n.post({url:"/dept.dept/add",params:a})}function H(a){return n.post({url:"/dept.dept/edit",params:a})}function oe(a){return n.post({url:"/dept.dept/delete",params:a})}function J(a){return n.get({url:"/dept.dept/detail",params:a})}const K={class:"edit-popup"},Q=B("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),ae=O({__name:"edit",emits:["success","close"],setup(a,{expose:V,emit:c}){const f=_(),p=_(),i=T("add"),b=L(()=>i.value=="edit"?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),u=X({id:"",pid:"",name:"",leader:"",mobile:"",sort:0,status:1}),v={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}],mobile:[{validator:(l,e,r)=>{if(e){const s=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;if(console.log(s.test(e)),s.test(e))r();else return r(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"))}else return r()},trigger:["blur"]}]},{optionsData:g}=M({dept:{}}),A=async()=>{var l,e;await((l=f.value)==null?void 0:l.validate()),i.value=="edit"?await H(u):await G(u),(e=p.value)==null||e.close(),c("success")},w=(l="add")=>{var e;i.value=l,(e=p.value)==null||e.open()},E=l=>{for(const e in u)l[e]!=null&&l[e]!=null&&(u[e]=l[e])},C=async l=>{const e=await J({id:l.id});E(e)},k=()=>{c("close")};return V({open:w,setFormData:E,getDetail:C}),(l,e)=>{const r=R,s=N,m=q,y=U,h=I,x=P;return F(),$("div",K,[t(S,{ref_key:"popupRef",ref:p,title:D(b),async:!0,width:"550px",onConfirm:A,onClose:k},{default:d(()=>[t(x,{ref_key:"formRef",ref:f,model:u,"label-width":"84px",rules:v},{default:d(()=>[u.pid!==0?(F(),j(s,{key:0,label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:d(()=>[t(r,{class:"flex-1",modelValue:u.pid,"onUpdate:modelValue":e[0]||(e[0]=o=>u.pid=o),data:D(g).dept,clearable:"","node-key":"id",props:{value:"id",label:"name"},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data"])]),_:1})):z("",!0),t(s,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:d(()=>[t(m,{modelValue:u.name,"onUpdate:modelValue":e[1]||(e[1]=o=>u.name=o),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u8D1F\u8D23\u4EBA",prop:"leader"},{default:d(()=>[t(m,{modelValue:u.leader,"onUpdate:modelValue":e[2]||(e[2]=o=>u.leader=o),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:d(()=>[t(m,{modelValue:u.mobile,"onUpdate:modelValue":e[3]||(e[3]=o=>u.mobile=o),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u6392\u5E8F",prop:"sort"},{default:d(()=>[B("div",null,[t(y,{modelValue:u.sort,"onUpdate:modelValue":e[4]||(e[4]=o=>u.sort=o),min:0},null,8,["modelValue"]),Q])]),_:1}),t(s,{label:"\u90E8\u95E8\u72B6\u6001"},{default:d(()=>[t(h,{modelValue:u.status,"onUpdate:modelValue":e[5]||(e[5]=o=>u.status=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ae as _,oe as a,le as d};

import{G as U,H as q,B as I,C as N,I as R,v as P,M as $,L as H,D as M,w as S}from"./element-plus.46c04e86.js";import{u as G,a as L}from"./vue-router.be7d85e4.js";import{c as X,d as j,e as z,f as J}from"./system.ab7fe0ea.js";import{P as m}from"./enum.9a9b4b6d.js";import{_ as K}from"./index.af4623d6.js";import{d as O,r as i,a1 as Q,o as W,c as Y,X as a,P as o,V as b}from"./@vue.6265a5d9.js";import{d as Z}from"./index.9967fbd7.js";import"./@vueuse.66625460.js";import"./@element-plus.84bb5020.js";import"./lodash-es.bb7dceda.js";import"./dayjs.f16af943.js";import"./axios.0f2860ff.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.9848f74d.js";import"./pinia.d91ee8f0.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.3e9ac15b.js";import"./color.a065fa6b.js";import"./clone.f258b259.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.29279dd9.js";import"./ms.a9ae1d6d.js";import"./nprogress.423ae918.js";import"./vue-clipboard3.ae536e99.js";import"./clipboard.6f2755f0.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.3fa8b4f2.js";const ee={class:"substance_edit-help"},ae=b("\u5B9A\u65F6\u4EFB\u52A1"),te=b("\u4FDD\u5B58"),ue=O({__name:"edit",setup(oe){const p=i(),B=G(),c=L(),n=i(m.ADD),_=i([]),e=i({id:"",name:"",type:1,command:"",expression:"",status:1,remark:"",params:""}),E=Q({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"}],command:[{required:!0,message:"\u8BF7\u8F93\u5165\u547D\u4EE4",trigger:"blur"}],params:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570",trigger:"blur"}],expression:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219",trigger:"blur"}]}),x=l=>{!l||l.validate(t=>{if(t)switch(n.value){case m.ADD:C();return;case m.EDIT:w();return}})},V=()=>{e.value.expression!=""&&F()},F=async()=>{const l=await X({expression:e.value.expression});_.value=l},C=async()=>{await j(e.value),setTimeout(()=>c.go(-1),500)},w=async()=>{delete e.value.status_desc,delete e.value.type_desc,await z(e.value),setTimeout(()=>c.go(-1),500)},g=async()=>{const l=await J({id:e.value.id});e.value=l,F()},d=B.query;return d.mode&&(n.value=d.mode),n.value===m.EDIT&&(e.value.id=d.id*1,g()),(l,t)=>{const D=U,v=q,s=I,r=N,y=R,A=P,f=$,k=H,h=M,T=S;return W(),Y("div",ee,[a(v,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[a(D,{content:n.value=="add"?"\u65B0\u589E\u5B9A\u65F6\u4EFB\u52A1":"\u7F16\u8F91\u5B9A\u65F6\u4EFB\u52A1",onBack:t[0]||(t[0]=u=>l.$router.go(-1))},null,8,["content"])]),_:1}),a(v,{shadow:"never",class:"!border-none mt-4"},{default:o(()=>[a(h,{rules:E,ref_key:"formRef",ref:p,model:e.value,"label-width":"120px"},{default:o(()=>[a(r,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[a(s,{modelValue:e.value.name,"onUpdate:modelValue":t[1]||(t[1]=u=>e.value.name=u),"show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",class:"max-w-[300px]"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u7C7B\u578B"},{default:o(()=>[a(y,{modelValue:e.value.type,"onUpdate:modelValue":t[2]||(t[2]=u=>e.value.type=u),label:1},{default:o(()=>[ae]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u547D\u4EE4",prop:"command"},{default:o(()=>[a(s,{modelValue:e.value.command,"onUpdate:modelValue":t[3]||(t[3]=u=>e.value.command=u),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165thinkphp\u547D\u4EE4\uFF0C\u5982vresion"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u53C2\u6570"},{default:o(()=>[a(s,{modelValue:e.value.params,"onUpdate:modelValue":t[4]||(t[4]=u=>e.value.params=u),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\uFF0C\u4F8B:--id 8 --name \u6D4B\u8BD5"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u72B6\u6001"},{default:o(()=>[a(A,{modelValue:e.value.status,"onUpdate:modelValue":t[5]||(t[5]=u=>e.value.status=u),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1}),a(r,{label:"\u89C4\u5219",prop:"expression"},{default:o(()=>[a(s,{onBlur:V,modelValue:e.value.expression,"onUpdate:modelValue":t[6]||(t[6]=u=>e.value.expression=u),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165crontab\u89C4\u5219\uFF0C\u4F8B\uFF1A59 * * *"},null,8,["modelValue"])]),_:1}),a(r,null,{default:o(()=>[a(k,{ref:"paneTable",data:_.value,style:{"max-width":"500px"}},{default:o(()=>[a(f,{prop:"time",label:"\u5E8F\u53F7","min-width":"80"}),a(f,{prop:"date",label:"\u6267\u884C\u65F6\u95F4","min-width":"180"})]),_:1},8,["data"])]),_:1}),a(r,{label:"\u5907\u6CE8"},{default:o(()=>[a(s,{type:"textarea",class:"max-w-[300px]",modelValue:e.value.remark,"onUpdate:modelValue":t[7]||(t[7]=u=>e.value.remark=u),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1}),a(K,null,{default:o(()=>[a(T,{type:"primary",onClick:t[8]||(t[8]=u=>x(p.value))},{default:o(()=>[te]),_:1})]),_:1})])}}});const Ge=Z(ue,[["__scopeId","data-v-d4a4cf47"]]);export{Ge as default};

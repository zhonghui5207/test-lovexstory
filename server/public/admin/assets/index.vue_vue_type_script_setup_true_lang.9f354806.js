import{c as O,B as j,C as z,D as M,M as U,b as $,L as q,O as K}from"./element-plus.46c04e86.js";import{P as Q}from"./index.ef2d2188.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang.9b41a941.js";import{d as X,e as G,s as v,r as H,af as J,o as g,O as b,P as a,a as s,X as t,u as i,$ as Y,Q as Z,W as f,V as ee,k as te}from"./@vue.6265a5d9.js";import{u as oe}from"./usePaging.92ba177b.js";import{d as ae}from"./distributor.a87a429c.js";import{f as le}from"./index.9967fbd7.js";const ne={class:"flex items-center"},se={class:"ml-2"},ue={class:"flex justify-end mt-4"},ge=X({__name:"index",props:{modelValue:{type:Object,default:()=>{}},type:{type:Number,default:1}},emits:["update:modelValue"],setup(h,{expose:E,emit:w}){const y=h,r=G({get(){return y.modelValue},set(l){w("update:modelValue",l)}}),m=v(),c=v(),p=H({user_info:""}),d=async()=>{await c.value.clearSelection(),n.lists.forEach(l=>{r.value.forEach(o=>{l.id==o.id&&c.value.toggleRowSelection(l,!0)})})},F=(l,o)=>{r.value=[o],d()},V=()=>{le.msgError("\u4EC5\u652F\u6301\u5355\u9009\uFF01"),d()},x=async()=>{await m.value.open(),await d(),_()},C=l=>l.id,S=()=>{r.value=c.value.getSelectionRows(),m.value.close()},{pager:n,getLists:_,resetPage:ie,resetParams:ce}=oe({fetchFun:ae,params:p.value});return E({open:x}),(l,o)=>{const R=J("Search"),k=O,B=j,P=z,D=M,u=U,A=$,I=q,L=W,N=Q,T=K;return g(),b(N,{title:"\u9009\u62E9\u7528\u6237",ref_key:"popRef",ref:m,width:"auto",async:"",onConfirm:S},{default:a(()=>[s("view",null,[t(D,{onSubmit:o[1]||(o[1]=Y(()=>{},["prevent"]))},{default:a(()=>[t(P,{label:"\u641C\u7D22\u7528\u6237"},{default:a(()=>[t(B,{modelValue:p.value.user_info,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value.user_info=e),class:"w-[240px]",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",onInput:i(_)},{append:a(()=>[t(k,null,{default:a(()=>[t(R)]),_:1})]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1}),s("div",null,[Z((g(),b(I,{ref_key:"tableRef",ref:c,size:"large",data:i(n).lists,class:"mt-4",height:"400px","row-key":C,onSelect:F,onSelectAll:V},{default:a(()=>[t(u,{"reserve-selection":"",type:"selection",width:"55"}),t(u,{label:"\u7F16\u53F7",prop:"account","min-width":"120"}),t(u,{label:"\u7528\u6237\u6635\u79F0","min-width":"180"},{default:a(({row:e})=>[s("div",ne,[t(A,{class:"w-[48px] h-[48px] flex-none",src:e.avatar},null,8,["src"]),s("div",se,f(e==null?void 0:e.nickname),1)])]),_:1}),t(u,{label:"\u4E0A\u7EA7\u63A8\u8350\u4EBA","min-width":"180"},{default:a(({row:e})=>[ee(f(e.first_leader_name||"\u7CFB\u7EDF"),1)]),_:1}),t(u,{label:"\u5206\u9500\u72B6\u6001","min-width":"180"},{default:a(({row:e})=>[s("div",null,f(e.is_freeze_desc),1)]),_:1})]),_:1},8,["data"])),[[T,i(n).loading]]),s("div",ue,[t(L,{modelValue:i(n),"onUpdate:modelValue":o[2]||(o[2]=e=>te(n)?n.value=e:null),onChange:i(_)},null,8,["modelValue","onChange"])])])])]),_:1},512)}}});export{ge as _};

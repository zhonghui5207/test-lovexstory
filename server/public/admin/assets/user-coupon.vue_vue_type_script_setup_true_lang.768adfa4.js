import{P as h}from"./index.ef2d2188.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang.9b41a941.js";import{w as D,B as P,M as V,L as x}from"./element-plus.46c04e86.js";import{K as R}from"./@element-plus.84bb5020.js";import{u as k}from"./usePaging.92ba177b.js";import{d as I,p as S}from"./coupon.4f920d07.js";import"./lodash.9848f74d.js";import"./index.9967fbd7.js";import{d as L,s as $,r as i,o as j,O as K,P as l,a as m,X as o,u as a,W as M,k as N}from"./@vue.6265a5d9.js";const T={class:"flex justify-end mt-4"},oe=L({__name:"user-coupon",emits:["close"],setup(U,{expose:f,emit:q}){const c=$(),p=i({name:"",get_type:2,status:2}),d=i([]),_=i(),{pager:u,getLists:r,resetPage:z,resetParams:O}=k({fetchFun:I,params:p.value,size:5}),v=t=>{d.value=t.map(e=>String(e.id))},g=t=>t.id,F=async()=>{await S({send_user:[_.value],id:d.value,send_user_num:1})};return f({open:async t=>{r(),_.value=t,c.value.open()}}),(t,e)=>{const w=D,y=P,s=V,C=x,E=B,b=h;return j(),K(b,{ref_key:"popRef",ref:c,title:"\u53D1\u653E\u4F18\u60E0\u5238",width:"700px",onConfirm:F,onClose:e[2]||(e[2]=n=>t.$emit("close"))},{default:l(()=>[m("div",null,[o(y,{placeholder:"\u8BF7\u8F93\u5165\u4F18\u60E0\u5238\u540D\u79F0",class:"w-[240px]",modelValue:p.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>p.value.name=n),onInput:a(r)},{append:l(()=>[o(w,{icon:a(R)},null,8,["icon"])]),_:1},8,["modelValue","onInput"]),o(C,{ref:"tableRef",class:"mt-2",data:a(u).lists,onSelectionChange:v,"row-key":g},{default:l(()=>[o(s,{type:"selection","reserve-selection":!0,width:"55"}),o(s,{label:"\u4F18\u60E0\u5238\u540D\u79F0","min-width":"180",prop:"name"}),o(s,{label:"\u4F18\u60E0\u5238\u5185\u5BB9","min-width":"180",prop:"content"}),o(s,{label:"\u53D1\u653E\u65B9\u5F0F","min-width":"180"},{default:l(({row:n})=>[m("div",null,M(n.receivingMethod==1?"\u7528\u6237\u9886\u53D6":"\u7CFB\u7EDF\u8D60\u9001"),1)]),_:1})]),_:1},8,["data"]),m("div",T,[o(E,{modelValue:a(u),"onUpdate:modelValue":e[1]||(e[1]=n=>N(u)?u.value=n:null),onChange:a(r),layout:"total, prev, pager, next, jumper"},null,8,["modelValue","onChange"])])])]),_:1},512)}}});export{oe as _};

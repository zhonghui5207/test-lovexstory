import{P as x}from"./index.ef2d2188.js";import{a as w,C as R,B as h,I as M,J as N,H as P,D as I}from"./element-plus.46c04e86.js";import{u as S,v as U}from"./course.75a395f6.js";import{_ as q}from"./picker.986ba611.js";import{f as T}from"./index.9967fbd7.js";import{d as G,r as n,s as O,a1 as z,o as H,O as J,P as a,a as p,X as l,V as X}from"./@vue.6265a5d9.js";const $={class:"edit"},j=p("div",{class:"form-tips"},"\u652F\u6301zip\u3001rar\u683C\u5F0F\u7684\u6587\u4EF6\uFF0C\u4E0D\u80FD\u8D85\u8FC7200M",-1),K=X("\u662F"),oe=G({__name:"course_material",setup(L,{expose:f}){const _=n(),d=O(),s=n(),r=n(""),c=n("");n();const m=n(),u=n({id:"",course_id:s,content:"",link:"",code:"",is_link:1}),v=z({content:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u8BFE\u4EF6\u8D44\u6599",trigger:"change"}],link:[{required:!0,message:"\u8BF7\u8F93\u5165\u7F51\u76D8\u94FE\u63A5",trigger:"blur"}],code:[{required:!0,message:"\u8BF7\u8F93\u5165\u7F51\u76D8\u5BC6\u7801",trigger:"blur"}]}),E=async()=>{const o=await S({course_id:s.value});console.log(o),c.value=o.content_name,o.length!=0?u.value=o:u.value={id:"",course_id:s,content:"",link:"",code:"",is_link:1}},D=async()=>{await U({...u.value,course_id:s.value})},B=(o,e)=>{c.value=e[0].name},g=o=>{o||T.alertError("\u4FEE\u6539\u5931\u8D25\uFF01"),o.validate(e=>{if(e)D();else return!1;d.value.visible=!1})};return f({openPop:(o,e)=>{switch(d.value.open(),s.value=o,m.value=e,m.value){case 1:r.value="\u56FE\u6587\u8BFE\u4EF6\u8D44\u6599";break;case 2:r.value="\u97F3\u9891\u8BFE\u4EF6\u8D44\u6599";break;case 3:r.value="\u89C6\u9891\u8BFE\u4EF6\u8D44\u6599";break}E()}}),(o,e)=>{const k=w,i=R,F=h,C=M,b=N,V=P,y=I,A=x;return H(),J(A,{ref_key:"popRef",ref:d,width:"700px",title:r.value,onConfirm:e[4]||(e[4]=t=>g(_.value)),async:!0},{default:a(()=>[p("div",$,[l(y,{ref_key:"formRef",ref:_,model:u.value,rules:v,"label-width":"120px"},{default:a(()=>[l(V,{shadow:"never",style:{"margin-top":"15px"},class:"!border-none mt-4"},{default:a(()=>[l(i,{label:"\u4E0A\u4F20:",prop:"content"},{default:a(()=>[p("div",null,[l(k,{class:"box-item",effect:"dark",content:c.value,placement:"top-start",disabled:!u.value.content},{default:a(()=>[l(q,{modelValue:u.value.content,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value.content=t),type:"file",limit:1,onChange:B},null,8,["modelValue"])]),_:1},8,["content","disabled"]),j])]),_:1}),l(i,{label:"\u7F51\u76D8\u94FE\u63A5:",prop:"link"},{default:a(()=>[l(F,{class:"ls-input",modelValue:u.value.link,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value.link=t),placeholder:"\u7531\u4E8EIOS\u5FAE\u4FE1\u7AEF\u4E0D\u652F\u6301\u8D44\u6599\u4E0B\u8F7D\uFF0C\u8BF7\u901A\u8FC7\u7F51\u76D8\u94FE\u63A5\u4E0A\u4F20\u3001\u4E0B\u8F7D\u8D44\u6599"},null,8,["modelValue"])]),_:1}),l(i,{label:"\u7F51\u76D8\u5BC6\u7801:",prop:"code"},{default:a(()=>[l(F,{class:"ls-input",modelValue:u.value.code,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value.code=t),placeholder:"\u8BF7\u8F93\u5165\u7F51\u76D8\u6587\u4EF6\u83B7\u53D6\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),l(i,{label:"\u5F3A\u5236\u7F51\u76D8\u4E0B\u8F7D:"},{default:a(()=>[l(b,{modelValue:u.value.is_link,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value.is_link=t)},{default:a(()=>[l(C,{label:1},{default:a(()=>[K]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["title"])}}});export{oe as _};

import{d as e,v as a,aH as l,s as t,$ as u,N as r,aI as s,O as o,x as n,aJ as d,T as i,o as c,e as v,h as m,b as p,w as f,k as x,t as _,F as b,ay as h,aj as y,ak as w,aK as k,aL as g,m as V,aM as C,D as j,j as $,a9 as A,r as E,a as N,ab as U,ac as B}from"./index.0909ac6c.js";import{_ as I}from"./u-icon.0b85921a.js";import{_ as M}from"./u-button.a01fb808.js";import{_ as z}from"./u-form-item.a5dd6ea5.js";import{_ as O}from"./u-popup.7b59164b.js";import{_ as S}from"./u-input.99f8d670.js";import{_ as D}from"./u-picker.4c8e50db.js";import{_ as F}from"./u-verification-code.0588edc1.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";var R=L(e({__name:"user_data",setup(e){const L=a(null),R=a(l.NONE),T=a(["男","女"]),G=a(!1),H=a(!1),K=a(!1),W=a(!1),J=a(""),X=a(""),q=a(""),P=a(""),Q=a(""),Y=t(),Z=async()=>{L.value=await h()},ee=e=>{Q.value=e},ae=async()=>{var e,a;if(!q.value)return uni.$u.toast("请输入新的手机号码");(null==(e=Y.value)?void 0:e.canGetCode)&&(await y({scene:L.value.mobile?w.CHANGE_MOBILE:w.BIND_MOBILE,mobile:q.value}),uni.$u.toast("发送成功"),null==(a=Y.value)||a.start())},le=async()=>{await k({type:L.value.mobile?"change":"bind",mobile:q.value,code:P.value}),uni.$u.toast("操作成功"),W.value=!1,Z()},te=async e=>{await g({field:R.value,value:e}),uni.$u.toast("操作成功"),Z()},ue=e=>{R.value=l.AVATAR,V({url:"/uni_modules/vk-uview-ui/components/u-avatar-cropper/u-avatar-cropper?destWidth=300&rectWidth=200&fileType=jpg"})},re=()=>{K.value=!0,R.value=l.SEX},se=e=>{te(e[0]+1),K.value=!1},oe=async()=>{if(""==X.value)return uni.$u.toast("账号不能为空");if(X.value.length>10)return uni.$u.toast("账号长度不得超过十位数");try{await C(X.value),R.value=l.USERNAME,await te(X.value),H.value=!1}catch(e){uni.$u.toast("请输入数字+字母！")}},ne=async e=>(J.value=e.detail.value.nickname,""==J.value?uni.$u.toast("昵称不能为空"):J.value.length>10?uni.$u.toast("昵称长度不得超过十位数"):(R.value=l.NICKNAME,await te(J.value),void(G.value=!1)));return u("uAvatarCropper",(e=>{r({title:"正在上传中...",mask:!0}),s(e).then((e=>{o(),te(e.url)})).catch((()=>{o(),uni.$u.toast("上传失败")}))})),n((async()=>{Z()})),d((()=>{i("uAvatarCropper")})),(e,a)=>{const l=j,t=$,u=A,r=E(N("u-icon"),I),s=E(N("u-button"),M),o=U,n=E(N("u-form-item"),z),d=B,i=E(N("u-popup"),O),h=E(N("u-input"),S),y=E(N("u-picker"),D),w=E(N("u-verification-code"),F);return c(),v(b,null,[m(" Main Start "),m(" 头部修改头像 "),p(t,{class:"header bg-white pt-[30rpx]"},{default:f((()=>[p(t,{class:"flex"},{default:f((()=>[p(u,{class:"flex flex-col items-center after:border-0","hover-class":"none","open-type":"chooseAvatar",style:{"background-color":"transparent"},onClick:ue,onChooseavatar:ue},{default:f((()=>{var e;return[p(l,{src:null==(e=L.value)?void 0:e.avatar},null,8,["src"]),p(t,{class:"mt-[10rpx] text-center text-muted text-xs"},{default:f((()=>[x(" 点击修改头像 ")])),_:1})]})),_:1})])),_:1})])),_:1}),m(" 用户ID "),p(t,{class:"item text-nr flex justify-between",onClick:a[0]||(a[0]=e=>{var a;H.value=!0,X.value=null==(a=L.value)?void 0:a.username})},{default:f((()=>[p(t,{class:"label"},{default:f((()=>[x("账号")])),_:1}),p(t,{class:"content"},{default:f((()=>{var e;return[x(_(null==(e=L.value)?void 0:e.account),1)]})),_:1}),p(r,{name:"arrow-right",size:"22",color:"#666"})])),_:1}),m(" 昵称 "),p(t,{class:"item text-nr flex justify-between",onClick:a[1]||(a[1]=e=>{var a;G.value=!0,J.value=null==(a=L.value)?void 0:a.nickname})},{default:f((()=>[p(t,{class:"label"},{default:f((()=>[x("昵称")])),_:1}),p(t,{class:"content"},{default:f((()=>{var e;return[x(_(null==(e=L.value)?void 0:e.nickname),1)]})),_:1}),p(r,{name:"arrow-right",size:"22",color:"#666"})])),_:1}),m(" 性别 "),p(t,{class:"item text-nr flex justify-between",onClick:re},{default:f((()=>[p(t,{class:"label"},{default:f((()=>[x("性别")])),_:1}),p(t,{class:"content"},{default:f((()=>{var e;return[x(_(null==(e=L.value)?void 0:e.sex),1)]})),_:1}),p(r,{name:"arrow-right",size:"22",color:"#666"})])),_:1}),m(" 手机号 "),p(t,{class:"item text-nr flex justify-between"},{default:f((()=>[p(t,{class:"label"},{default:f((()=>[x("手机号")])),_:1}),p(t,{class:"content"},{default:f((()=>{var e,a;return[x(_(""==(null==(e=L.value)?void 0:e.mobile)?"未绑定手机号":null==(a=L.value)?void 0:a.mobile),1)]})),_:1}),p(s,{onClick:a[2]||(a[2]=e=>W.value=!0),size:"mini",type:"primary",shape:"circle",plain:!0},{default:f((()=>{var e;return[x(_(""==(null==(e=L.value)?void 0:e.mobile)?"绑定手机号":"更换手机号"),1)]})),_:1})])),_:1}),m(" 注册时间 "),p(t,{class:"item text-nr flex justify-between"},{default:f((()=>[p(t,{class:"label"},{default:f((()=>[x("注册时间")])),_:1}),p(t,{class:"content"},{default:f((()=>{var e;return[x(_(null==(e=L.value)?void 0:e.create_time),1)]})),_:1})])),_:1}),m(" 昵称修改组件 "),p(i,{modelValue:G.value,"onUpdate:modelValue":a[3]||(a[3]=e=>G.value=e),closeable:!0,mode:"center",maskCloseAble:!1,"border-radius":"20"},{default:f((()=>[p(t,{class:"px-[50rpx] py-[40rpx] bg-white",style:{width:"85vw"}},{default:f((()=>[p(d,{onSubmit:ne},{default:f((()=>[p(t,{class:"mb-[70rpx] text-xl text-center"},{default:f((()=>[x("修改昵称")])),_:1}),p(n,{borderBottom:""},{default:f((()=>[p(o,{class:"nr h-[60rpx] w-full",value:L.value.nickname,name:"nickname",type:"nickname",placeholder:"请输入昵称"},null,8,["value"])])),_:1}),p(t,{class:"mt-[80rpx]"},{default:f((()=>[p(u,{class:"bg-primary text-white w-full h-[80rpx] !text-lg !leading-[80rpx] rounded-full","form-type":"submit",size:"mini","hover-class":"none"},{default:f((()=>[x(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),m(" 账号修改组件 "),p(i,{modelValue:H.value,"onUpdate:modelValue":a[5]||(a[5]=e=>H.value=e),closeable:!0,mode:"center","border-radius":"20"},{default:f((()=>[p(t,{class:"px-[50rpx] py-[40rpx] bg-white",style:{width:"85vw"}},{default:f((()=>[p(t,{class:"mb-[70rpx] text-xl text-center"},{default:f((()=>[x("修改账号")])),_:1}),p(n,{borderBottom:""},{default:f((()=>[p(h,{class:"flex-1",modelValue:X.value,"onUpdate:modelValue":a[4]||(a[4]=e=>X.value=e),placeholder:"请输入账号",border:!1},null,8,["modelValue"])])),_:1}),p(t,{class:"mt-[80rpx]"},{default:f((()=>[p(s,{onClick:oe,type:"primary",shape:"circle"},{default:f((()=>[x(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),m(" 性别修改组件 "),p(y,{mode:"selector",modelValue:K.value,"onUpdate:modelValue":a[6]||(a[6]=e=>K.value=e),"confirm-color":"#4173FF","default-selector":[0],range:T.value,onConfirm:se},null,8,["modelValue","range"]),m(" 账号修改组件 "),p(i,{modelValue:W.value,"onUpdate:modelValue":a[9]||(a[9]=e=>W.value=e),closeable:!0,mode:"center","border-radius":"20"},{default:f((()=>[p(t,{class:"px-[50rpx] py-[40rpx] bg-white",style:{width:"85vw"}},{default:f((()=>[p(t,{class:"mb-[70rpx] text-xl text-center"},{default:f((()=>[x("修改手机号码")])),_:1}),p(n,{borderBottom:""},{default:f((()=>[p(h,{class:"flex-1",modelValue:q.value,"onUpdate:modelValue":a[7]||(a[7]=e=>q.value=e),placeholder:"请输入新的手机号码",border:!1},null,8,["modelValue"])])),_:1}),p(n,{borderBottom:""},{default:f((()=>[p(h,{class:"flex-1",modelValue:P.value,"onUpdate:modelValue":a[8]||(a[8]=e=>P.value=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),p(t,{class:"border-l border-solid border-0 border-light pl-3 text-muted leading-4 ml-3 w-[180rpx]",onClick:ae},{default:f((()=>[p(w,{ref_key:"uCodeRef",ref:Y,seconds:60,onChange:ee,"change-text":"x秒"},null,512),x(" "+_(Q.value),1)])),_:1})])),_:1}),p(t,{class:"mt-[80rpx]"},{default:f((()=>[p(s,{onClick:le,type:"primary",shape:"circle"},{default:f((()=>[x(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-b5958d68"]]);export{R as default};

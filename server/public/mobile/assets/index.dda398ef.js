import{d as e,v as a,a4 as t,X as s,ae as l,r as n,a as c,o as i,e as o,h as u,b as r,w as m,F as p,f as d,c as f,g,C as v,k as y,t as _,m as I,D as w,j as x,p as k}from"./index.0909ac6c.js";import{_ as h}from"./u-icon.0b85921a.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";var b=C(e({__name:"index",props:{list:{default:[]},type:{default:0},status:{default:1},cateId:{default:-1}},emits:["refresh"],setup(e,{emit:C}){const b=e,j=a([]),z=t(),D=s((()=>z.token)),E=s((()=>e=>{switch(e){case 1:return"/static/images/icon_image_text.png";case 2:return"/static/images/icon_audio.png";case 3:return"/static/images/icon_video.png"}}));l((()=>b.list),(e=>{4==b.type&&e.forEach((e=>{e.open=!0})),j.value=e}),{immediate:!0});const F=e=>{I({url:e})};return(a,t)=>{const s=w,l=x,I=k,b=n(c("u-icon"),h);return i(),o(p,null,[u(' <template v-if="type == 4">\n        <view\n            class="collapse"\n            v-for="(collapseItem, collapseIndex) in cataList"\n            :key="collapseItem.id"\n        >\n            <view\n                class="collapse--header flex justify-between"\n                @click="handleCollapseItem(collapseIndex)"\n            >\n                <view class="collapse--header--title flex-1 truncate">{{ collapseItem.name }}</view>\n                <u-icon\n                    name="arrow-up"\n                    color="#888888"\n                    size="24"\n                    :style="{\n                        transition: \'all 0.3s\',\n                        transform: collapseItem.open ? \'rotate(0)\' : \'rotate(180deg)\'\n                    }"\n                ></u-icon>\n            </view>\n\n            <view\n                class="catalogue collapse--body"\n                :style="{\n                    height: collapseItem.open ? collapseItem.catalogue.length * 98 + \'rpx\' : \'0px\'\n                }"\n            >\n                <view\n                    class="catalogue-item"\n                    :class="{ grayscale: cataItem.is_study }"\n                    v-for="cataItem in collapseItem.catalogue"\n                    :key="cataItem.id"\n                    @click="refresh({ ...cataItem, type: collapseItem.type })"\n                >\n                    <image :src="getCourseType(collapseItem.type)"></image>\n                    <view\n                        class="catalogue-title truncate"\n                        :class="{ \'catalogue-title-s\': cataItem.id == cateId }"\n                        >{{ cataItem.name }}</view\n                    >\n                    <view class="catalogue-item-last flex row-end" v-if="status == 2">\n                        <text v-if="!cataItem.fee_type">免费</text>\n                        <u-icon v-else name="lock" color="#888888" size="28"></u-icon>\n                    </view>\n                </view>\n            </view>\n        </view>\n    </template> '),u(" <template v-else> "),r(l,{class:"catalogue"},{default:m((()=>[(i(!0),o(p,null,d(j.value,(a=>(i(),f(l,{class:v(["catalogue-item items-center w-full",{grayscale:a.is_study}]),key:a.id,onClick:e=>(e=>{if(!D.value)return F("/pages/login/login");C("refresh",e)})(a)},{default:m((()=>[r(s,{src:g(E)(e.type)},null,8,["src"]),r(l,{class:"ml-[14px] !min-w-0"},{default:m((()=>[r(l,{class:v(["catalogue-title",{"catalogue-title-s":a.id==e.cateId}])},{default:m((()=>[y(_(a.name),1)])),_:2},1032,["class"]),1!==e.type?(i(),f(l,{key:0,class:v(["text-info text-sm",{"catalogue-title-s":a.id==e.cateId}])},{default:m((()=>[r(I,null,{default:m((()=>[y(_(a.catelogue_time)+"时长",1)])),_:2},1024),r(I,null,{default:m((()=>[y("·")])),_:1}),a.id!=e.cateId?(i(),f(I,{key:0},{default:m((()=>[y("学习进度"+_(a.study_progress),1)])),_:2},1024)):u("v-if",!0),a.id==e.cateId?(i(),f(I,{key:1},{default:m((()=>[y("学习中")])),_:1})):u("v-if",!0)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024),2==e.status?(i(),f(l,{key:0,class:"catalogue-item-last ml-auto flex-none"},{default:m((()=>[a.fee_type?(i(),f(b,{key:1,name:"lock",color:"#888888",size:"28"})):(i(),f(I,{key:0},{default:m((()=>[y("免费")])),_:1}))])),_:2},1024)):u("v-if",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1}),u(" </template> ")],2112)}}}),[["__scopeId","data-v-ba654f50"]]);export{b as C};

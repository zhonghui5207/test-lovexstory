import{d as e,v as a,ae as l,o as u,c as s,w as t,h as r,y as o,z as v,b as d,A as n,l as f,k as i,t as c,b0 as m,O as p,N as h,j as g,D as y,q as _}from"./index.0909ac6c.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";var x=b(e({__name:"index",props:{bottom:{default:"40"},bgColor:{default:""},empty:{default:""},emptyText:{default:"暂无内容"},showUp:{type:Boolean,default:!1},i:{default:0},index:{default:0}},emits:["up","delete"],setup(e,{expose:b,emit:x}){const w=e,k=a({num:1,size:10}),z=a(!1),R=a(w.showUp),T=a(!1),U=a(0),j=a("下拉刷新"),S=a(!1),C=a("加载中"),q=a(!1),A=a(!1);l((()=>w.index),(e=>{w.i!==e||A.value||(A.value=!0,m((()=>{x("up",k.value)})))}),{immediate:!0}),l((()=>w.showUp),(e=>{R.value=e}),{immediate:!0});const B=e=>{U.value=e.detail.dy,e.detail.dy>=100?j.value="释放更新":j.value="下拉刷新"},D=()=>{T.value||(T.value=!0,j.value="加载中",R.value||(R.value=!0,k.value.num=1,x("up",k.value)))},E=()=>{R.value=!1,T.value=!1,U.value=0,j.value="下拉刷新"},I=()=>{R.value=!1,T.value=!1,U.value=0},N=()=>{console.log("触底"),S.value&&(q.value=!0,k.value.num=k.value.num+1,x("up",k.value))};return b({endSuccess:e=>{j.value="加载成功",C.value="加载成功",setTimeout((()=>{R.value=!1,T.value=!1,q.value=!1,C.value="加载中"}),400),z.value=0===e;const a=k.value.num*k.value.size;S.value=a<e,p()},endErr:()=>{setTimeout((()=>{R.value=!1,T.value=!1,q.value=!1,C.value="加载中",console.log("为空？？"),z.value=!0}),400),j.value="加载失败",C.value="加载失败",p()},resetUpScroll:()=>{h({title:"载入中"}),x("up",k.value)},resetParams:()=>{k.value.num=1,k.value.size=10}}),(a,l)=>{const m=g,p=y,h=_;return u(),s(h,{"scroll-y":"",onScrolltolower:N,"refresher-threshold":80,"refresher-enabled":!0,onRefresherpulling:B,"refresher-background":"#ffffff","refresher-triggered":R.value,onRefresherrefresh:D,onRefresherrestore:E,onRefresherabort:I,class:"scroll-view",style:n({"background-color":e.bgColor})},{default:t((()=>[r(" 内容 "),o(d(m,null,{default:t((()=>[d(m,{style:n({"padding-bottom":e.bottom+"rpx"})},{default:t((()=>[f(a.$slots,"default",{},void 0,!0),r(" 底部触底动画 "),q.value?(u(),s(m,{key:0,class:"flex row-center p-50"},{default:t((()=>[d(m,{class:"loading loading-load"}),d(m,{class:"loading-name"},{default:t((()=>[i(c(C.value),1)])),_:1})])),_:1})):r("v-if",!0),q.value||R.value?r("v-if",!0):(u(),s(m,{key:1,class:"text-center muted font-md p-50"},{default:t((()=>[i("没有更多了～")])),_:1}))])),_:3},8,["style"])])),_:3},512),[[v,!z.value]]),r(" 空状态时 "),o(d(m,{class:"empty"},{default:t((()=>[d(p,{src:e.empty},null,8,["src"]),d(m,{class:"muted"},{default:t((()=>[i(c(e.emptyText),1)])),_:1})])),_:1},512),[[v,z.value]]),r(" 返回顶部按钮 (暂时未写) ")])),_:3},8,["refresher-triggered","style"])}}}),[["__scopeId","data-v-434b5435"]]);export{x as r};

import{d as e,v as a,s,ag as l,am as t,aD as o,o as i,c as u,w as n,h as c,b as r,k as d,e as f,f as v,F as m,az as p,r as y,a as _,ab as x,j as g,p as h,D as b,t as k}from"./index.0909ac6c.js";import{_ as j}from"./u-icon.0b85921a.js";import{_ as w}from"./z-paging.1a5d6e51.js";import{a as H}from"./store.44d0c87b.js";import{b as C}from"./shop.005defa8.js";import{C as M}from"./index.c8eeccc8.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./u-image.879031a5.js";import"./index.5b25a2dc.js";var z=V(e({__name:"index",setup(e){const V=a(!1),z=a(""),S=a(!1),E=a(""),D=s(),F=a([]),G=a([]),L=a([]),U=()=>{V.value=!0,""!=E.value&&(E.value="",o({title:"搜索"})),D.value.reload()},B=async(e,a)=>{if(z.value){const e=z.value.replace(/^\s+|\s+$/g);G.value.includes(e)||(G.value.unshift(e),t.set("history",G.value))}try{const{lists:s}=await H({page_no:e,page_size:a,category_id:E.value,name:z.value});D.value.complete(s)}catch(s){console.log("下拉加载",s),D.value.complete(!1)}},I=async()=>{(await p({title:"温馨提示",content:"是否清空历史记录？"})).confirm&&(t.set("history",""),G.value=[])},Q=e=>{z.value=e,V.value=!0};return l((e=>{G.value=t.get("history")||[];const a=(null==e?void 0:e.id)||void 0,s=(null==e?void 0:e.name)||void 0;a&&(E.value=a,V.value=!0,o({title:s})),(async()=>{try{L.value=await C(),console.log(L.value)}catch(e){console.log("获取热门搜索失败=>",e)}})()})),(e,a)=>{const s=y(_("u-icon"),j),l=x,t=g,o=h,p=b,H=y(_("z-paging"),w);return i(),u(t,{class:"container"},{default:n((()=>[c(" Header Search Start "),r(t,{class:"search-box flex bg-white"},{default:n((()=>[r(t,{class:"search flex"},{default:n((()=>[c(" 左侧图标 "),r(s,{name:"search",size:"34",color:"#888888"}),c(" 输入 "),r(l,{modelValue:z.value,"onUpdate:modelValue":a[0]||(a[0]=e=>z.value=e),type:"text",class:"search--input",placeholder:"请输入关键词搜索",onFocus:a[1]||(a[1]=e=>S.value=!0),onBlur:a[2]||(a[2]=e=>S.value=!1)},null,8,["modelValue"]),c(" 清空图标 ")])),_:1}),r(t,{class:"flex justify-center items-center text-lg ml-2",onClick:U},{default:n((()=>[d(" 搜索 ")])),_:1})])),_:1}),c(" Header Search End "),c(" Main History Start "),!1===V.value?(i(),u(t,{key:0,class:"history bg-white"},{default:n((()=>[c(" Hot Header "),0!=L.value.status?(i(),u(t,{key:0,class:"flex justify-between"},{default:n((()=>[r(o,{class:"font-medium text-base"},{default:n((()=>[d("热门搜索")])),_:1})])),_:1})):c("v-if",!0),c(" Hot Main "),0!=L.value.status?(i(),u(t,{key:1,class:"flex flex-wrap mt-[30rpx]"},{default:n((()=>[(i(!0),f(m,null,v(L.value.data,(e=>(i(),u(t,{key:e,class:"history-item",onClick:a=>Q(e.name)},{default:n((()=>[d(k(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})):c("v-if",!0),c(" Main Hot End "),c(" History Header "),r(t,{class:"flex justify-between"},{default:n((()=>[r(o,{class:"font-medium text-base"},{default:n((()=>[d("历史搜索")])),_:1}),r(p,{src:"../../static/images/icon_del.png",onClick:I},null,8,["src"])])),_:1}),c(" History Main "),r(t,{class:"flex flex-wrap mt-[30rpx]"},{default:n((()=>[(i(!0),f(m,null,v(G.value,(e=>(i(),u(t,{key:e,class:"history-item",onClick:a=>Q(e)},{default:n((()=>[d(k(e),1)])),_:2},1032,["onClick"])))),128))])),_:1}),c(" Main History End ")])),_:1})):c("v-if",!0),c(" Main GoodsLists Start "),!0===V.value?(i(),u(t,{key:1,class:"content pt-[24rpx] bg-white"},{default:n((()=>[r(H,{ref_key:"paging",ref:D,modelValue:F.value,"onUpdate:modelValue":a[3]||(a[3]=e=>F.value=e),onQuery:B,fixed:!1},{default:n((()=>[r(M,{type:"lists",list:F.value},null,8,["list"])])),_:1},8,["modelValue"])])),_:1})):c("v-if",!0),c(" Main GoodsLists End ")])),_:1})}}}),[["__scopeId","data-v-6925788d"]]);export{z as default};

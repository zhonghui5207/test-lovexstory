import{d as e,v as a,aY as t,aZ as l,X as o,ae as s,o as u,c as i,w as n,l as r,h as d,C as c,A as v,a_ as f,j as h,a$ as p,r as b,a as g,b as m,e as y,f as _,g as x,k as w,t as F,F as S,b0 as k,b1 as C,R as B,H as T,q as j}from"./index.0909ac6c.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as z}from"./u-badge.2b611478.js";import{_ as W}from"./u-sticky.c3d66a2b.js";import{u as R}from"./useTouch.93885aba.js";var H=$(e({__name:"tab",props:{dot:{type:[Boolean,String],default:!1},name:{type:[Boolean,String],default:""},info:null},setup(e){const p=e,b=a(!1),g=a(!1),m=a(!1),y=a(void 0),_=t("updateTabs"),x=t("handleChange"),w=()=>{_&&_()},F=f();console.log(F),x(null==F?void 0:F.props,(e=>{y.value=y.value||e,b.value=e,m.value=y.value,g.value=e})),l((()=>{w()}));const S=o((()=>{const{dot:e,info:a}=p;return{dot:e,info:a}}));return s((()=>S.value),(()=>{w()})),s((()=>p.name),(e=>{w()})),(e,a)=>{const t=h;return u(),i(t,{class:c({active:b.value,inactive:!b.value,tab:!0}),style:v(g.value?"":"display: none;")},{default:n((()=>[m.value?r(e.$slots,"default",{key:0},void 0,!0):d("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-9df85c86"]]);var I=$(e({__name:"tabs",props:{isScroll:{type:Boolean,default:!0},current:{default:0},height:{default:80},fontSize:{default:28},duration:{default:.3},activeColor:{default:"#2073F4"},inactiveColor:{default:"#333"},barWidth:{default:40},barHeight:{default:4},gutter:{default:30},bgColor:{default:"#FFFFFF"},name:{default:"name"},count:{default:"count"},offset:{default:[5,20]},bold:{type:Boolean,default:!0},activeItemStyle:{default:{}},showBar:{type:Boolean,default:!0},barStyle:{default:{}},itemWidth:{default:"auto"},isFixed:{type:Boolean,default:!1},top:{default:0},stickyBgColor:{default:"#FFFFFF"},swipeable:{type:Boolean,default:!0}},emits:["change"],setup(e,{emit:t}){const $=e,{touch:H,resetTouchStatus:I,touchStart:X,touchMove:O}=R(),q=a([]),A=a([]),E=a(0),M=a([]),Y=a(0),Z=a(0),D=a(0),G=a("cu-tab"),J=a($.current),K=a(!0),L=a(!1),N=f();s((()=>q.value),(async(e,a)=>{K.value||e.length===a.length||(J.value=0),await k(),V()})),s((()=>$.current),((e,a)=>{k((()=>{J.value=e,ae()}))}),{immediate:!0});const P=o((()=>{const e={width:$.barWidth+"rpx",transform:`translate(${Z.value}px, -100%)`,"transition-duration":`${K.value?0:$.duration}s`,"background-color":$.activeColor,height:$.barHeight+"rpx",opacity:K.value?0:1,"border-radius":$.barHeight/2+"px"};return Object.assign(e,$.barStyle),e})),Q=o((()=>e=>{let a={height:$.height+"rpx","line-height":$.height+"rpx","font-size":$.fontSize+"rpx",padding:$.isScroll?`0 ${$.gutter}rpx`:"",flex:$.isScroll?"auto":"1",width:`${$.itemWidth}rpx`};return e==J.value&&$.bold&&(a.fontWeight="bold"),e==J.value?(a.color=$.activeColor,a=Object.assign(a,$.activeItemStyle)):a.color=$.inactiveColor,a})),U=()=>{q.value=A.value.map((e=>{const{name:a,dot:t,active:l,inited:o}=e.event,{updateRender:s}=e;return{name:a,dot:t,active:l,inited:o,updateRender:s}}))},V=async()=>{const e=await C("#"+G.value,!1,N);D.value=e.left,Y.value=e.width,ee()},ee=()=>{const e=B().in(N);for(let a=0;a<q.value.length;a++)e.select(`#tab-item-${a}`).fields({size:!0,rect:!0});e.exec((e=>{M.value=e,ae()}))},ae=()=>{const e=M.value[J.value];if(!e)return;const a=e.width,t=e.left-D.value-(Y.value-a)/2;E.value=t<0?0:t;const l=e.left+e.width/2-D.value;Z.value=l-T($.barWidth)/2,1==K.value&&setTimeout((()=>{K.value=!1}),100),A.value.forEach(((e,a)=>{const t=a===J.value;t===e.event.active&&e.event.inited||e.updateRender(t)}))},te=e=>{$.swipeable&&(L.value=!0,X(e))},le=e=>{$.swipeable&&L.value&&O(e)},oe=()=>{if(!$.swipeable||!L.value)return;if("horizontal"===H.direction&&H.offsetX>=50){let e,a=q.value.length,l=J.value;e=H.deltaX<=0?l>=a-1?0:l+1:l<=0?a-1:l-1,k((()=>{J.value=e,ae()})),t("change",e)}L.value=!1};return l((()=>{U()})),p("handleChange",((e,a)=>{A.value.push({event:e,updateRender:a})})),p("updateTabs",U),(a,l)=>{const o=b(g("u-badge"),z),s=h,f=j,p=b(g("u-sticky"),W);return u(),i(s,{class:"tabs"},{default:n((()=>[m(p,{enable:e.isFixed,"bg-color":e.stickyBgColor,"offset-top":e.top,"h5-nav-height":0},{default:n((()=>[m(s,{id:G.value,style:v({background:e.bgColor})},{default:n((()=>[m(f,{style:v({height:e.height+"rpx"}),"scroll-x":"",class:"scroll-view","scroll-left":E.value,"scroll-with-animation":""},{default:n((()=>[m(s,{class:c(["scroll-box",{"tabs-scorll-flex":!e.isScroll}])},{default:n((()=>[(u(!0),y(S,null,_(q.value,((a,l)=>(u(),i(s,{class:"tab-item line1",id:"tab-item-"+l,key:l,onClick:e=>(e=>{e!=J.value&&(k((()=>{J.value=e,ae()})),t("change",e))})(l),style:v([x(Q)(l)])},{default:n((()=>[m(o,{count:a[e.count]||a.dot||0,offset:e.offset,size:"mini"},null,8,["count","offset"]),w(" "+F(a[e.name]||a.name),1)])),_:2},1032,["id","onClick","style"])))),128)),e.showBar?(u(),i(s,{key:0,class:"tab-bar",style:v([x(P)])},null,8,["style"])):d("v-if",!0)])),_:1},8,["class"])])),_:1},8,["style","scroll-left"])])),_:1},8,["id","style"])])),_:1},8,["enable","bg-color","offset-top"]),m(s,{class:"tab-content",onTouchstart:te,onTouchmove:le,onTouchcancel:oe,onTouchend:oe},{default:n((()=>[d(' <view class="tab-track" :class="{\'tab-animated\': animated}" :style="[trackStyle]"> '),m(s,null,{default:n((()=>[r(a.$slots,"default",{},void 0,!0)])),_:3}),d(" </view> ")])),_:3})])),_:3})}}}),[["__scopeId","data-v-c1344dea"]]);export{I as a,H as t};
